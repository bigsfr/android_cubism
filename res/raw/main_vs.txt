
uniform mat4 uModelM;
uniform mat4 uModelViewM;
uniform mat4 uModelViewProjM;
uniform mat4 uNormalM;

uniform mat4 uLightModelViewProjM;

attribute vec3 aPosition;
attribute vec3 aNormal;

varying vec4 vPositionModel;
varying vec4 vPositionView;
varying vec4 vPositionLight;
varying vec3 vNormal;

void main() {
	gl_Position = uModelViewProjM * vec4(aPosition, 1.0);
	
	vPositionModel = uModelM * vec4(aPosition, 1.0);
	vPositionView = uModelViewM * vec4(aPosition, 1.0);
	vNormal = mat3(uModelM) * aNormal;
	
	const mat4 scaleMatrix = mat4(0.5, 0.0, 0.0, 0.0,
	                              0.0, 0.5, 0.0, 0.0,
	                              0.0, 0.0, 0.5, 0.0,
	                              0.5, 0.5, 0.5, 1.0);
	
	vPositionLight = scaleMatrix * uLightModelViewProjM * vec4(aPosition, 1.0);
}
